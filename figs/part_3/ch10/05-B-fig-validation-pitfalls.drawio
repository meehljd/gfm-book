<mxfile host="app.diagrams.net" modified="2024-01-22T00:00:00.000Z" agent="Claude" version="22.1.0" type="device">
  <diagram name="Temporal Leakage" id="temporal-leakage">
    <mxGraphModel dx="400" dy="380" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="360" pageHeight="360" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="(B) Temporal Leakage" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontFamily=Arial;" vertex="1" parent="1">
          <mxGeometry x="20" y="10" width="280" height="25" as="geometry"/>
        </mxCell>

        <!-- Subtitle -->
        <mxCell id="subtitle" value="Training on future knowledge that won't exist at deployment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Arial;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="20" y="30" width="320" height="15" as="geometry"/>
        </mxCell>

        <!-- Timeline -->
        <mxCell id="timeline" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="50" y="140" as="sourcePoint"/>
            <mxPoint x="310" y="140" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="time-label" value="Time →" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontFamily=Arial;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="280" y="145" width="40" height="12" as="geometry"/>
        </mxCell>

        <!-- WRONG: Random split -->
        <mxCell id="wrong-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="55" width="300" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="wrong-title" value="⚠ WRONG: Random Split (ignores time)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Arial;fontStyle=1;fontColor=#d62728;" vertex="1" parent="1">
          <mxGeometry x="40" y="58" width="220" height="15" as="geometry"/>
        </mxCell>

        <!-- Random split points -->
        <mxCell id="w1" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="60" y="95" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="w2" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="90" y="95" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="w3" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="130" y="95" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="w4" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="175" y="95" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="w5" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="220" y="95" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="w6" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="270" y="95" width="15" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="wrong-legend" value="▲ Train  ● Test (mixed across time)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="112" width="160" height="12" as="geometry"/>
        </mxCell>

        <!-- Year markers -->
        <mxCell id="y2018" value="2018" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="55" y="145" width="30" height="12" as="geometry"/>
        </mxCell>
        <mxCell id="y2020" value="2020" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="130" y="145" width="30" height="12" as="geometry"/>
        </mxCell>
        <mxCell id="y2022" value="2022" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="205" y="145" width="30" height="12" as="geometry"/>
        </mxCell>
        <mxCell id="y2024" value="2024" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="275" y="145" width="30" height="12" as="geometry"/>
        </mxCell>

        <!-- RIGHT: Temporal split -->
        <mxCell id="right-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="165" width="300" height="75" as="geometry"/>
        </mxCell>
        <mxCell id="right-title" value="✓ RIGHT: Temporal Split (respects time)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Arial;fontStyle=1;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="40" y="168" width="220" height="15" as="geometry"/>
        </mxCell>

        <!-- Temporal split visualization -->
        <mxCell id="train-zone" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;opacity=50;" vertex="1" parent="1">
          <mxGeometry x="50" y="190" width="130" height="35" as="geometry"/>
        </mxCell>
        <mxCell id="test-zone" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;opacity=50;" vertex="1" parent="1">
          <mxGeometry x="185" y="190" width="130" height="35" as="geometry"/>
        </mxCell>

        <mxCell id="r1" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="70" y="198" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="r2" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="110" y="198" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="r3" value="▲" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="145" y="198" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="r4" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="210" y="198" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="r5" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="255" y="198" width="15" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="r6" value="●" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Arial;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="290" y="198" width="15" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="train-label" value="Train (past)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontStyle=1;fontColor=#1f77b4;" vertex="1" parent="1">
          <mxGeometry x="85" y="215" width="60" height="12" as="geometry"/>
        </mxCell>
        <mxCell id="test-label" value="Test (future)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;fontStyle=1;fontColor=#2ca02c;" vertex="1" parent="1">
          <mxGeometry x="220" y="215" width="60" height="12" as="geometry"/>
        </mxCell>

        <!-- Cutoff line -->
        <mxCell id="cutoff" value="" style="endArrow=none;html=1;strokeWidth=2;strokeColor=#d62728;dashed=1;dashPattern=5 3;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="180" y="230" as="sourcePoint"/>
            <mxPoint x="180" y="185" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="cutoff-label" value="Cutoff" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=6;fontFamily=Arial;fontColor=#d62728;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="165" y="228" width="30" height="10" as="geometry"/>
        </mxCell>

        <!-- Example -->
        <mxCell id="example-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="250" width="300" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="example-title" value="&lt;b&gt;Example in VEP:&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontFamily=Arial;fontColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="40" y="253" width="100" height="15" as="geometry"/>
        </mxCell>
        <mxCell id="example-text" value="ClinVar labels change over time. A variant classified P in 2024 may have been&lt;br&gt;VUS in 2020. Training on 2024 labels, testing on variants annotated in 2020 = leak." style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=7;fontFamily=Arial;" vertex="1" parent="1">
          <mxGeometry x="40" y="268" width="280" height="28" as="geometry"/>
        </mxCell>

        <!-- Key -->
        <mxCell id="key-box" value="&lt;b&gt;Fix:&lt;/b&gt; Use label timestamps; train only on labels available before cutoff date" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=8;fontFamily=Arial;align=left;spacingLeft=8;" vertex="1" parent="1">
          <mxGeometry x="30" y="310" width="300" height="25" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
